# Net Time Project — PhD Assessment (Coding Task)

**PhD Programme: Science & Health in Football | Saarland University**  
**Applicant: Yaswanth O. S. | February 2026**

---

## Overview

This repository contains the coding submission for the Net Time Project PhD assessment.
It implements three tasks using the publicly available Bundesliga dataset described in:

> Bassek, M., Rein, R., Weber, H. & Memmert, D. (2025). *An integrated dataset of
> spatiotemporal and event data in elite soccer.* Scientific Data, 12, 195.
> https://doi.org/10.1038/s41597-025-04505-y

The dataset provides TRACAB Gen5 tracking data (25 Hz) and DFL-annotated event data
from **7 German Bundesliga matches** (2 Bundesliga 1, 5 Bundesliga 2, season 2022/23),
covering 207 players across over 1 million tracking frames.

---

## Repository Structure

```
net-time-assessment/
│
├── NetTime_CodingAssessment.ipynb   # Main notebook (Tasks 1–3)
├── requirements.txt                  # Python dependencies
├── README.md                         # This file
│
└── images/                           # Saved figures (auto-generated by notebook)
    ├── fig1_ball_trajectory.png        # 2.1 Ball trajectory, first 5 min
    ├── fig2_heatmaps.png               # 2.2 Player positional heatmaps
    ├── fig3_event_distribution.png     # 2.3 Event type distribution by half
    ├── fig4_ball_status_timeline.png   # 2.4 Ball-status timeline
    ├── fig5_speed_distribution.png     # 2.5 Player speed: active vs. inactive
    ├── fig6_net_time_all_matches.png   # 3   Net time comparison, all 7 matches
    ├── fig7_stoppages.png              # 3   Stoppage duration distribution
    ├── fig8_stoppage_breakdown.png     # 2.6 Causal decomposition, all 7 matches
    └── fig9_h1_vs_h2.png              # 2.7 H1 vs H2 net time comparison
```

> **Note:** The dataset XML files are **not included** in this repository (they are
> distributed via figshare, see Data Access below). You need to download them separately
> and set the `DATA_DIR` path in the notebook before running.

---

## Tasks Covered

### Task 1 — Data Access, Parsing, and Flat DataFrames
- Custom XML parser for DFL MatchInfo files (`read_match_info_xml`) — floodlight 0.4.0
  does not expose this function natively
- Wrappers around `floodlight` 0.4.0 for event and tracking data
- Flat DataFrames for all three modalities across all 7 matches

### Task 2 — Visualisations (9 figures total)

| # | Figure | Data | Scope |
|---|---|---|---|
| 2.1 | Ball trajectory with BallStatus overlay | Tracking | Single match, first 5 min |
| 2.2 | Player positional heatmaps — Home vs. Away | Tracking | Single match, H1, ball-in-play only |
| 2.3 | Event type distribution by half | Events | Single match |
| 2.4 | Ball-status timeline | Tracking | Single match, both halves |
| 2.5 | Player speed distribution — active vs. inactive | Tracking | Single match, H1 |
| 2.6 | Stoppage causal decomposition | Events | **All 7 matches** |
| 2.7 | H1 vs H2 net time comparison | MatchInfo | **All 7 matches** |
| — | Net time comparison (all methods) | Tracking + Events | **All 7 matches** |
| — | Stoppage duration distribution | Tracking | Single match |

### Task 3 — Net Playing Time: Two Approaches

| | Approach 1 | Approach 2 |
|---|---|---|
| Method | Frame-counting via BallStatus signal | Stoppage summation via event timestamps |
| Resolution | 40 ms (25 Hz) | ~1–2 s (human annotation) |
| Strength | Precise, continuous, objective | Causally attributed by stoppage type |
| Captures | All ball-inactive frames | Set-pieces, VAR, post-goal windows |
| vs. Official Δ | < 0.1 s (pipeline integrity check) | +205 s residual (unattributed stoppages) |

Both approaches are validated against the official DFL net time stored in the
MatchInfo XML (`PlayingTimeFirstHalf` / `PlayingTimeSecondHalf` in milliseconds).

#### Key Finding
Approach 2 captures three categories of stoppage — set-piece restarts
(`DecisionTimestamp → EventTime`), VAR reviews (`TimestampStartAction/EndAction`),
and post-goal windows (`SuccessfulShot → next KickOff`). After all three are captured,
a residual gap of ~205 s (~3.5 min) remains. This represents stoppages that are
precisely measurable via tracking but carry no causal label in the event stream —
the direct input for the qualitative triangulation methodology proposed in Task A.

---

## Data Access

1. Go to the figshare repository for Bassek et al. (2025):
   https://doi.org/10.6084/m9.figshare.28196177

2. Download all XML files for the 7 matches. The files follow this naming convention:
   ```
   DFL_02_01_matchinformation_<COM-ID>_<MAT-ID>.xml
   DFL_03_02_events_raw_<COM-ID>_<MAT-ID>.xml
   DFL_04_03_positions_raw_observed_<COM-ID>_<MAT-ID>.xml
   ```

3. Place all files in a **single flat folder** (no subfolders needed).

4. Open the notebook and set `DATA_DIR` in **Cell 4** to your folder path:
   ```python
   DATA_DIR = Path(r"C:\Users\yourname\Downloads\Bassek data")  # Windows
   DATA_DIR = Path("/Users/yourname/Downloads/Bassek data")      # Mac/Linux
   ```

---

## Setup and Installation

### Requirements
- Python 3.9+
- See `requirements.txt` for full dependency list

### Quick Start

```bash
# 1. Clone the repository
git clone https://github.com/YaswanthOS/net-time-assessment.git
cd net-time-assessment

# 2. Create a virtual environment (recommended)
python -m venv venv
source venv/bin/activate        # Mac/Linux
venv\Scripts\activate           # Windows

# 3. Install dependencies
pip install -r requirements.txt

# 4. Launch Jupyter
jupyter notebook NetTime_CodingAssessment.ipynb
```

### Conda (alternative)
```bash
conda create -n nettime python=3.10
conda activate nettime
pip install -r requirements.txt
jupyter notebook NetTime_CodingAssessment.ipynb
```

---

## Known Issues & Notes

- **floodlight 0.4.0**: The `read_match_info_xml` function is not available in this
  version. A custom parser is implemented in the notebook (Cell 9) using Python's
  built-in `xml.etree.ElementTree`.
- **Out-of-order events**: Some DFL event XML files contain out-of-order timestamps
  (late-logged events). The notebook handles this by anchoring half boundaries to
  `KickOff` and `FinalWhistle` gameclock values rather than raw timestamps.
- **Player ID uniqueness**: TRACAB position data assigns integer IDs (0–19) per team.
  The speed computation uses a composite `team + player_id` key to avoid Home/Away
  collision when grouping by player.
- **Delete events**: The DFL event stream contains `Delete` and `OtherBallAction`
  entries used for internal corrections. These are filtered before event visualisations.
- **Data not included**: XML data files must be downloaded separately from figshare.

---

## Contact

Yaswanth O. S.  
IISER Thiruvananthapuram  
yaswanth2021@iisertvm.ac.in  
February 2026
